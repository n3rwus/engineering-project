{% extends 'layout.html' %}

{% block content %}
    <div class="card text-center">
        <div class="card-body">
            <img class="mb-4" src="../static/images/pytorch.png" alt="" width="72">
            <h5 class="card-title">Upload any image</h5>
            <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            <form method=post enctype=multipart/form-data>
                <div class="mb-3">
                    <input class="form-control" type="file" name="file" id="input-file">
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">Check me out</label>
                </div>
                <br/>
                <button class="btn btn-primary btn-lg btn-block" type="submit">Upload</button>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
            integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
            crossorigin="anonymous"></script>

    <script type="text/javascript">
        $('#input-file').bind('change', function () {
            let fileSize = this.files[0].size / 1024 / 1024; // this gives in MB
            if (fileSize > 1) {
                $("#input-file").val(null);
                alert('file is too big. images more than 1MB are not allowed')
                return
            }

            let ext = $('#input-file').val().split('.').pop().toLowerCase();
            if ($.inArray(ext, ['jpg', 'jpeg']) === -1) {
                $("#input-file").val(null);
                alert('only jpeg/jpg files are allowed!');
            }
        });
    </script>

{% endblock %}